---
hide:
  - navigation
  - toc
---

<p align="center">
<svg width="182" height="35" viewBox="0 0 182 35" fill="none" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<rect width="182" height="35" fill="url(#pattern0)"/>
<defs>
<pattern id="pattern0" patternContentUnits="objectBoundingBox" width="1" height="1">
<use xlink:href="#image0_331_118" transform="scale(0.00243427 0.0126582)"/>
</pattern>
<image id="image0_331_118" width="411" height="79" xlink:href="data:image/png;base64,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"/>
</defs>
</svg>
</p>

<p align="center">
    <em>The purest architecture, intuitive EList, magic debugger, lightweight syntax</em>
</p>

---

**Documentation**: <a href="https://epurelib.github.io/docs/" target="_blank">https://epurelib.github.io/docs/</a>

**Source Code**: <a href="https://github.com/nagvalhm/epure" target="_blank">https://github.com/nagvalhm/epure</a>

---

Epure is python agnostic ORM - you can store and retrieve data having no idea about database, table and columns. 
All technical details hidden from you. Care only about your business logic.

Key features:

* **Easy syntax**: Create tables based on your classes in no time *
* **Light**: etc

Installing
----------

Install and update using <a href="https://pip.pypa.io/en/stable/getting-started/">`pip`</a>:

```console
$ pip install -U epure
```

Install and update using <a href="https://python-poetry.org/docs/">`poetry`</a>:

```console
$ poetry add epure
```

A Simple Example
----------------

#### Creating Epurized Class

Let's start with simple example for Epure, you will need your DataBase to be up and running.
We will be using PostgresSQL for this example.
Read more about supported DB's here :

!!! warning
    Note that you need to use __type__ __hints__ for class attributes in order to save class to DB.

```python hl_lines="1 6 11 14 21 27"
from epure import epure, escript, GresDB

GresDb('postgres://postgres:postgres@localhost:5432',
log_level=3).connect() # (1)!

@epure() # (2)!
class Example:
    int_attr:int
    str_attr:str = "Hello World!"

    @escript # (3)!
    def get_example_hello_str(self): [func]
        tp = self.tp # (4)!
        query = tp.str_attr in ("Hello Sun!") # (5)!
        #↓↓↓
        # query = "SELECT public.example.str_attr IN ("Hello Sun!")"
        res = self.resource.read(query) # (6)!
        return res

obj1 = Example()
obj1.int_attr = 1

obj1.save()

obj2 = Example()
obj1.int_attr = 2
obj1.int_attr = "Hello Sun!"

obj2.save()

```

1. Format of string to connect ('database://user:password@host:port'); Note that there is two ways to connect to db, read here:
2. `#!python @epure` is metaclass decorator function, that modifies class; more info here: 
3. `#!python @escript` is method decorator for epure decorated classes; more info here:
4. note that tp (short for `#!python TableProxy`) is only avalible in @escript decorated method scope and only; more info here: 
5. read more about supported sql operators in `#!python Epure` like `#!python in` here:
6. learn more about `#!python read()` here:

Now when your instances saved in DB under the public.example table, we can talk about __creating__ __queries__ __variations__:

#### 1. `#!python @escript` with use of magic debugger

Using the declared class above, we now can call <a name="func">it's</a> `#!python get_example_hello_str()` method that will :magic_wand: _magically_ :magic_wand: return your executed query.

And it's even compatible with IDE's debugger like VSCode!

```python hl_lines="1"

res2 = obj2.get_example_hello_str() # -> list[list[epure_object]]

res2[0].int_attr # -> 2
res2[0].str_attr # -> "Hello Sun!"

```

#### 2. shortcut `#!python read()` with kwarg parameters

Alternatively if you know criteria by which you want to read data, you can use this method
or you have a unique node_id of the object and you want to straight up retrive it

```python hl_lines="3"

node_id = obj1.node_id # -> UUID4 # (1)!

res1 = obj1.table.read(node_id=node_id) # -> list[list[epure_object]]

res1[0].int_attr # -> 1
res1[0].str_attr # -> "Hello World!"

```

1. node_id is a unique UUID object indentifier that Epure uses to discriminate different objects

Elist and Eset
-----

#### Elist

Elist is really convenient in terms of using easy retrivable data collection.

You can look at it like strictly typed list which garanties order with idea of simple saving and retriving its contents from DB.

Elist can garantuie order of objects when is used by user at a time, in cases of big system with multiple users please refer to Eset.

Let's look at an example:

```python hl_lines="3"
from epure import epure, Elist

@epure() # (2)!
class Example:
    int_attr:int = 42
    str_attr:str = "Hello World!"

@epure() # (2)!
class ElistExample:
    elist_str:Elist[str] = Elist[str](["Like","a", "piece", "of", "cake"])
    elist_epure:Elist[Example]

ex1 = Example()
ex1.int_attr = 68

ex2 = Example()

elist_ex = ElistExample()
elist_ex.elist_epure = Elist[Example]([ex1, ex2])
elist_ex.save()

elist_ex_read = Example.resource.read(data_id = elist_ex.data_id)
elist_ex_read.elist_str[4] # -> "cake"
elist_ex_read.elist_epure[0].int_attr # -> 68
```

#### Eset

Eset is simmilar to Elist, though it does not guarantee order of its stored contents.

It is convinient in cases when you need store big chunks of data. You can then easily retrive part of data stored there based on criteria you need

Developers
-----
Nikita Umarov (Pichugin), 
Pavel Pichugin


Links
-----

-   Documentation: https://github.com/nagvalhm/epure/blob/main/README.md
-   Changes: https://github.com/nagvalhm/epure
-   PyPI Releases: https://pypi.org/project/epure/
-   Source Code: https://github.com/nagvalhm/epure
-   Issue Tracker: https://github.com/nagvalhm/epure/issues
-   Website: https://pypi.org/project/epure/